<div id="wrapper">
	
	<div class="animated fadeInRight container-fluid">
		<div class="row tc-history">
		<div class="col-lg-10 col-lg-offset-1" >
			
				<div class="alert alert-success"><strong>TC History 1 DAY</strong></div>
				<div class="table-responsive">
					<table class="table table-striped table-bordered table-hover">
					<thead>
					<tr>
						<th>#</th>
						<th>TC100</th>
						<th>TCw100</th>
						<th>Total Market Cap</th>
						<th>Date Time</th>
					</tr>
					</thead>
					<tbody id="history1_day">
						<tr>
							<td colspan="5" style="text-align:center;"><img src="/images/data-loader.gif"/></td>
						</tr>
					</tbody>
					</table>
				</div>
				<div class="row">
					<div class="col-md-4"><div id="history_1day_chart_price"></div></div>
					<div class="col-md-4"><div id="history_1day_chart_weight"></div></div>
					<div class="col-md-4"><div id="history_1day_chart_market_cap"></div></div>						
				</div>
				<div class="alert alert-success"><strong>TC History 7 DAY</strong></div>
				<div class="table-responsive">
					<table class="table table-striped table-bordered table-hover">
					<thead>
					<tr>
						<th>#</th>
						<th>TC100</th>
						<th>TCw100</th>
						<th>Total Market Cap</th>
						<th>Date Time</th>
					</tr>
					</thead>
					<tbody id="history7_day">
						<tr>
							<td colspan="5" style="text-align:center;"><img src="/images/data-loader.gif"/></td>
						</tr>
					</tbody>
					</table>
				</div>
				<div class="row">
					<div class="col-md-4"><div id="history_7day_chart_price"></div></div>
					<div class="col-md-4"><div id="history_7day_chart_weight"></div></div>
					<div class="col-md-4"><div id="history_7day_chart_market_cap"></div></div>						
				</div>	
				
			</div>
		</div>	
	</div>
	
</div>
<script>
$(document).ready(function(){
	
	$.ajax({
		type:'GET',
		url:'/tc_history_data',
		success:function(data){ 
			var str='';
			
			if(data.history1_day.history_array.length>0){
				data.history1_day.history_array.forEach(function(history,index){
					str+='<tr>';
					str+='<td>'+(index+1)+'</td>';
					str+='<td>'+history.tc100+'</td>';
					str+='<td>'+history.tcw100+'</td>';
					str+='<td>'+history.total_usd_market_cap+'</td>';
					str+='<td>'+history.date_created+'</td>';
					str+='</tr>';
				});
				$("#history1_day").html(str);
			}	
			
			str='';
			if(data.history7_day.history_array.length>0){
				data.history7_day.history_array.forEach(function(history,index){
					str+='<tr>';
					str+='<td>'+(index+1)+'</td>';
					str+='<td>'+history.tc100+'</td>';
					str+='<td>'+history.tcw100+'</td>';
					str+='<td>'+history.total_usd_market_cap+'</td>';
					str+='<td>'+history.date_created+'</td>';
					str+='</tr>';
				});
				$("#history7_day").html(str);
			}	
			
			$('.table').DataTable({
				pageLength: 10,
				lengthMenu: [[10, 25, 50, -1], [10, 25, 50, 'All']],
				responsive: true,
				dom: '<"html5buttons"B>lTfgitp',
				aoColumnDefs: [{
					'bSortable': false,
					'aTargets': [0] 
				}],
				"ordering": false,
				buttons: [
					//{extend: 'copy'},
					{extend: 'csv'},
					{extend: 'excel', title: 'ExampleFile'},
					{extend: 'pdf', title: 'ExampleFile'},

					//{extend: 'print',
					 //customize: function (win){
						//$(win.document.body).addClass('white-bg');
						//$(win.document.body).css('font-size', '10px');
						//$(win.document.body).find('table').addClass('compact').css('font-size', 'inherit');
					//}
					//}
				]
			});
			
			c3.generate({
			bindto: '#history_1day_chart_price',
			  data: {
				json:data.history1_day.tc100_array, 
				keys: {
				  x: 'time', 
				  value: ['TC100'],
				},
				type: 'spline'
			  },
			  axis: {
				x: {
				  type: 'category',
				}
			  }
			});
	
			c3.generate({
			bindto: '#history_1day_chart_weight',
			  data: {
				json:data.history1_day.tcw100_array, 
				keys: {
				  x: 'time',
				  value: ['TCw100'],
				},
				type: 'spline'
			  },
			  axis: {
				x: {
				  type: 'category',
				}
			  }
			});
			
			c3.generate({
			bindto: '#history_1day_chart_market_cap',
			  data: {
				json:data.history1_day.market_cap_array, 
				keys: {
				  x: 'time',
				  value: ['MARKETCAP'],
				},
				type: 'spline'
			  },
			  axis: {
				x: {
				  type: 'category',
				}
			  }
			});
			
			c3.generate({
			bindto: '#history_7day_chart_price',
			  data: {
				json:data.history7_day.tc100_array, 
				keys: {
				  x: 'time', 
				  value: ['TC100'],
				},
				type: 'spline'
			  },
			  axis: {
				x: {
				  type: 'category',
				}
			  }
			});
	
			c3.generate({
			bindto: '#history_7day_chart_weight',
			  data: {
				json:data.history7_day.tcw100_array, 
				keys: {
				  x: 'time',
				  value: ['TCw100'],
				},
				type: 'spline'
			  },
			  axis: {
				x: {
				  type: 'category',
				}
			  }
			});
			
			c3.generate({
			bindto: '#history_7day_chart_market_cap',
			  data: {
				json:data.history7_day.market_cap_array, 
				keys: {
				  x: 'time',
				  value: ['MARKETCAP'],
				},
				type: 'spline'
			  },
			  axis: {
				x: {
				  type: 'category',
				}
			  }
			});
		}
	});
});
</script>

